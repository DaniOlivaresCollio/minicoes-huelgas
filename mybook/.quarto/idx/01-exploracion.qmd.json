{"title":"Exploración y Preparación de datos","markdown":{"headingText":"Exploración y Preparación de datos","containsRefs":false,"markdown":"\n<div style=\"text-align: justify\">\n\n```{r cargar-paquetes-2,echo=FALSE,warning=FALSE,message=FALSE}\nrm(list=ls())\noptions(scipen = 999)\n\nlibrary(pacman)\np_load(tidyverse,\n       knitr,\n       bookdown,\n       car,\n       sjmisc,\n       sjPlot,\n       sjlabelled,\n       psych,\n       kableExtra,\n       gridExtra,\n       lubridate,\n       viridis,\n       statar,\n       readxl,\n       tinytex,\n       ggrepel,\n       ggalluvial,\n       survey, \n       httr,\n       readr, \n       ggplot2, \n       labelled,\n       shadowtext)\n```\n\n\n## Variables\n\nCargamos la base de datos ELSOC 2016-2023 en formato *long*.\n\n```{r datos-2,echo=FALSE}\nload(here::here(\"input/data/ELSOC_Long_2016_2023.RData\"))\n```\n\nSeleccionamos las variables de interés.\n\n```{r variables,echo=FALSE}\n# Seleccion solo para mirar, aun sin ponderadores\ndata <- elsoc_long_2016_2023 %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,ola_w01,ola_w02,ola_w03,                    # identificacion ola\n         ola_w04,ola_w05,ola_w06,ola_w07,                # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         ponderador_long_total,                          # ponderador longit\n         sexo=m0_sexo,edad=m0_edad,educ=m01,             # caract sociodem\n         m02,m06,m07,m08,m10,region_cod,m13,m14,m14b,    # caract sociodem\n         m03,ciuo88_m03,ciuo08_m03,                      # caract ocupacional\n         m04,ciiu3_m04,ciiu4_m04,                        # caract ocupacional\n         c33,d01_01,                                     # clase y estatus\n         c12_04,                                         # membresia sindicato\n         marcha=c08_02,                                  # freq participa marchas\n         huelga=c08_03,                                  # freq participa huelgas\n         c13,c14_01,c14_02,c15,                          # interes politica\n         perc_gerente=d03_01,                            # Salario percibido gerente\n         perc_obrero=d03_02,                             # Salario percibido obrero\n         just_gerente=d04_01,                            # Salario justo gerente\n         just_obrero=d04_02                              # Salario justo obrero\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n```\n\nPrimero, se realiza una revisión exploratoria de las variables de interés, considerando todas las olas de la base de datos, tanto para la muestra original como la de refresco.\n\n```{r,echo=FALSE}\nn <- nrow(data)\n```\n\nSe comienza con `r n` observaciones.\n\n\n## Caracterización empleo\n\n\n### actividad\n\nCon la variable *numérica* ELSOC:\n\n-   `m02`. ¿Cuál de estas situaciones describe mejor su actividad principal durante el último mes?\n\nCreamos la variable *factor* `actividad`.\n\n```{r,echo=FALSE}\n# Recodficar\nsum(is.na(data$m02)) # 48 casos\ndata <- data[!is.na(data$m02), ]\ndata$actividad <- car::recode(data$m02,\n                              recodes=c(\"1='Trabaja de manera remunerada con jornada completa';\n                                         2='Trabaja de manera remunerada a tiempo parcial';\n                                         3='Estudia y trabaja';\n                                         4='Solo estudia';\n                                         5='Jubilado o pensionado';\n                                         6='Desempleado, buscando trabajo';\n                                         7='Realiza tareas no remuneradas';\n                                         8='Esta enfermo o tiene una discapacidad';\n                                         9='No estudia, no trabaja y no busca trabajo'\"),\n                              as.factor=TRUE, \n                              levels=c(\"Trabaja de manera remunerada con jornada completa\",\n                                       \"Trabaja de manera remunerada a tiempo parcial\",\n                                       \"Estudia y trabaja\",\n                                       \"Solo estudia\",\n                                       \"Jubilado o pensionado\",\n                                       \"Desempleado, buscando trabajo\",\n                                       \"Realiza tareas no remuneradas\",\n                                       \"Esta enfermo o tiene una discapacidad\",\n                                       \"No estudia, no trabaja y no busca trabajo\"))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$actividad,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Actividad\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Actividad principal, por ola\") \n```\n\n```{r,echo=FALSE}\nn <- nrow(data)\n```\n\nAl remover los NA's se queda con `r n` observaciones.\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad                                       # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\n# 20.713 obs.\n```\n\n\n### actividad ocupados\n\nSe crea la variable actividad solamente para ocupados\n\n```{r,echo=FALSE}\n# Definir las categorías que deseas mantener\ncategorias_a_mantener <- c(\"Trabaja de manera remunerada con jornada completa\",\n                           \"Trabaja de manera remunerada a tiempo parcial\",\n                           \"Estudia y trabaja\") \n\n# Crear la nueva variable actividad2\ndata$actividad2 <- ifelse(as.character(data$actividad) %in% categorias_a_mantener,as.character(data$actividad),NA)\ndata$actividad2 <- factor(data$actividad2,\n                          levels=categorias_a_mantener)\n\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$actividad2,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Actividad 2\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Actividad de ocupados, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2                            # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 12.653 obs.\n```\n\n\n### rel_empleo\n\nCon la variable *numérica* ELSOC:\n\n-   `m07`. En su actual ocupación usted trabaja como:\n\nCreamos la variable *factor* `rel_empleo`.\n\n```{r,echo=FALSE}\n# Recodficar\ndata$rel_empleo <- car::recode(data$m07,\n                               recodes=c(\"1='Empleado u obrero en empresa privada';\n                                          2='Empleado u obrero del sector público';\n                                          3='Miembro de las Fuerzas Armadas y de Orden';\n                                          4='Patrón/a o empleador/a';\n                                          5='Trabaja solo, no tiene empleados';\n                                          6='Familiar no remunerado';\n                                          7='Servicio doméstico'\"),\n                               as.factor=TRUE, # convertir a factor\n                               levels=c(\"Empleado u obrero en empresa privada\",\n                                        \"Empleado u obrero del sector público\",\n                                        \"Miembro de las Fuerzas Armadas y de Orden\",\n                                        \"Patrón/a o empleador/a\",\n                                        \"Trabaja solo, no tiene empleados\",\n                                        \"Familiar no remunerado\",\n                                        \"Servicio doméstico\")) # ordenar niveles\n```\n\nEsta variable solamente está presente en las olas 2016, 2018 y 2021. Por lo tanto, se duplican los datos de relación de empleo para los años siguientes, es decir, en 2017 se pondrán los valores de 2016, y así sucesivamente.\n\n```{r,echo=FALSE}\n# Crear una columna con la variable rel_empleo adelantada una ola\ndata <- data %>%\n  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo\n  mutate(rel_empleo_lagged=lag(as.character(rel_empleo),n=1)) %>%  # Desplaza rel_empleo a la siguiente ola, conviertiendo el factor en character temporalmente\n  ungroup()\n\n# Rellenar los valores NA (de las olas que no estaban) en la variable original\ndata <- data %>%\n  mutate(rel_empleo=ifelse(!is.na(rel_empleo),as.character(rel_empleo),rel_empleo_lagged)) %>%  # Si rel empleo no es NA, sustituir con el valor de rel_empleo, y si es NA con la ola variable desplazada una ola y asegurarse que actividad esté en formato carácter\n  mutate(rel_empleo=factor(rel_empleo)) %>%  # Convertir de nuevo a factor\n  select(-rel_empleo_lagged)                 # Elimina la columna temporal\n```\n\n```{r,echo=FALSE}\n# Volver a establecer niveles\ndata$rel_empleo <- factor(data$rel_empleo,\n                          levels=c(\"Empleado u obrero en empresa privada\",\n                                   \"Empleado u obrero del sector público\",\n                                   \"Miembro de las Fuerzas Armadas y de Orden\",\n                                   \"Patrón/a o empleador/a\",\n                                   \"Trabaja solo, no tiene empleados\",\n                                   \"Familiar no remunerado\",\n                                   \"Servicio doméstico\"))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$rel_empleo,data$ola,\n         show.col.prc=TRUE,\n         var.labels=c(\"Relación de empleo\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Relación de Empleo, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo                 # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 11.495 obs.\n```\n\n\n### rel_empleo2\n\n```{r,echo=FALSE}\ndata$rel_empleo2 <- car::recode(data$rel_empleo,\n                                recodes=c(\"'Patrón/a o empleador/a'='Empleador';\n                                           'Trabaja solo, no tiene empleados'='Autoempleado';\n                                           'Empleado u obrero en empresa privada'='Asalariado';\n                                           'Empleado u obrero del sector público'='Asalariado';\n                                           'Miembro de las Fuerzas Armadas y de Orden'='Asalariado';\n                                           'Familiar no remunerado'='Asalariado';\n                                           'Servicio doméstico'='Asalariado'\"),\n                                as.factor=TRUE, # convertir a factor\n                                levels=c(\"Empleador\",\n                                         \"Autoempleado\",\n                                         \"Asalariado\")) # ordenar niveles\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$rel_empleo2,data$ola,\n         show.col.prc=TRUE,\n         var.labels=c(\"Relación de empleo 2\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Relación de Empleo 2, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2     # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 11.495 obs.\n```\n\n\n### sector\n\nSe crea en una nueva variable *dicotómica*, `sector`, donde:\n\n-   `sector==0`: Sector público más fuerzas armadas (`m07==2`, `m07==3`)\n-   `sector==1`: Sector privado (`m07==1`, `m07==4`, `m07==5`,` m07==6`, `m07==7`)\n\n```{r,echo=FALSE}\n# Crear variable sector\ndata <- data %>%\n  mutate(sector=if_else(rel_empleo==\"Empleado u obrero del sector público\"|rel_empleo==\"Miembro de las Fuerzas Armadas y de Orden\",0,1))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$sector, data$ola,\n         show.col.prc = TRUE, \n         var.labels = c(\"Sector\",\"Ola\"),\n         show.summary = FALSE,\n         title = \"Frecuencias y porcentajes de Sector, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector                                          # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 11.495 obs.\n```\n\n\n### Ocupación: isco08\n\nLa variable *tipo character* ELSOC:\n\n-   `m03`. ¿Cuál es su ocupación u oficio actual? Describa sus principales tareas y funciones en el puesto de trabajo actual\n\nSe encuentra codificada de acuerdo con la CIUO88 para el año 2016 en la variable *numérica* `ciuo88_m03`, y CIUO08 para los años 2018 y 2021, en la variable *numérica* `ciuo08_m03`.\n\n-   `ciuo88_m03`: CIUO (1988) del entrevistado, para año 2016\n-   `ciuo08_m03`: CIUO (2008) del entrevistado, para año 2018 y 2021\n\nPor lo tanto, se realiza una recodificación creando una nueva variable *numérica* donde están todas las olas homolagadas a la CIUO08, llamada `isco08`. \n\n```{r,echo=FALSE,message=FALSE,warning=FALSE}\n# Carga bbdd con comparacion 88 y 08\nisco08_88 <- read_excel(here::here(\"input/isco08-88.xls\"))\nisco08_88 <- isco08_88 %>%\n  rename(isco08=`ISCO 08 Code`,isco88=`ISCO-88 code`)\n\n# Exploración\nvalores_repetidos <- table(isco08_88$isco88) # Contar los valores repetidos en la variable\nvalores_repetidos <- valores_repetidos[valores_repetidos > 1]\nvalores_repetidos <- table(isco08_88$isco08) # Contar los valores repetidos en la variable\nvalores_repetidos <- valores_repetidos[valores_repetidos > 1]\n\n# CIUO - ISCO: Recodificación 88->08 4 digitos en datos elsoc\nindices <- match(data$ciuo88_m03,isco08_88$isco88)\ndata$ciuo08_rec <- isco08_88$isco08[indices]\ndata$ciuo08_rec <- as.numeric(data$ciuo08_rec) # es solo la recodificación de las que eran 88 en data, es decir, año 2016\n\n# Creación variable isco08 con ciuo08_m03 y ciuo08_rec (ex ciuo88_m03) 4 digitos\ndata$isco08 <- ifelse(!is.na(data$ciuo08_rec),data$ciuo08_rec,data$ciuo08_m03) # es la unión en una variable de todo en 08\n```\n\nAdemás, esta variable también se presenta solamente en las olas 2016, 2018 y 2021. Por lo que, se duplican los datos de ocupación para los años siguientes, es decir, en 2017 se pondrán los valores de 2016, y así sucesivamente.\n\n```{r,echo=FALSE}\n# Crear una columna con la variable \"isco08\" adelantada una ola\ndata <- data %>%\n  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo\n  mutate(isco08_lagged=lag(isco08,n=1)) %>%  # Desplaza isco08 a la siguiente ola\n  ungroup()\n\n# Rellenar los valores NA en la variable original\ndata <- data %>%\n  mutate(isco08=ifelse(!is.na(isco08),isco08,isco08_lagged)) %>%  # Si isco08 es NA, sustituir con el valor de la ola anterior \n  select(-isco08_lagged)                 # Elimina la columna temporal\n```\n\nSe crean dos nuevas variables `isco08_1d` y `isco08_2d`, de la ISCO08 con 1 y 2 dígitos respectivamente. \n\n```{r,echo=FALSE}\n# CIUO - ISCO: creación de variables con 1 dígito\ndata$isco08_1d <- as.character(data$isco08)\ndata$isco08_1d <- substr(data$isco08_1d,1,1)\ndata$isco08_1d <- as.numeric(data$isco08_1d)\n\n# CIUO - ISCO: creación de variables con 2 dígitos\ndata$isco08_2d <- as.character(data$isco08)\ndata$isco08_2d <- substr(data$isco08_2d,1,2)\ndata$isco08_2d <- as.numeric(data$isco08_2d)\n\n# Tabla de frecuencias y porcentajes 1 dígito\nsjt.xtab(data$isco08_1d,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"CIUO08\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Ocupación con 1 dígito, por ola\")\n\n# Tabla de frecuencias y porcentajes 2 dígitos\nsjt.xtab(data$isco08_2d,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"CIUO08\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Ocupación con 2 dígitos, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d               # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 11.462 obs.\n```\n\n\n### cualificacion\n\nSe crea una nueva variable *factor* con el Nivel de cualificación, llamada `cualificacion`, de acuerdo con la variable CIUO08 de 2 dígitos `isco08_2d`, siguiendo el criterio:\n\n- Expertos (Experts): 11 a 34 con universitaria completa o más \n- Calificados (Skilled): 11 a 34 con universitaria incompleta o menos, y 35,41,42,43,44,53, y 51,54,61,62,71,72,73,74,75,81 con media completa o más.\n- No calificados (Unskilled): 51,54,61,62,71,72,73,74,75,81 con media incompleta o menos, y 52,63,82,83,90+ \n\n```{r,echo=FALSE}\n# Creación variable Nivel de cualificación\ndata <- mutate(data,\n               cualificacion=factor(case_when(isco08_2d<=34&educ>=9~\"Experts\",\n                                              isco08_2d<=34&educ<9~\"Skilled\",\n                                              isco08_2d%in%c(35,41:44,53)~\"Skilled\",\n                                              isco08_2d%in%c(51,54,61,62,71:75,81)&educ>5~\"Skilled\",\n                                              isco08_2d%in%c(51,54,61,62,71:75,81)&educ<=5~\"Unskilled\",\n                                              isco08_2d%in%c(52,63,82,83,91:99)~\"Unskilled\"),\n                                    levels=c(\"Experts\",\"Skilled\",\"Unskilled\")))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$cualificacion,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Nivel de cualificación\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes del Nivel de Cualificación, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion                                   # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 11.434\n```\n\n\n### Rama: isic4 y rama\n\nLa variable *tipo character* ELSOC:\n\n-   `m04`. ¿A qué rubro o giro de actividad se dedica principalmente la empresa, institución o negocio para la cual usted trabaja?\n\nSe encuentra codificada de acuerdo con la CIIU3 para el año 2016 en la variable *numérica* `ciiu3_m04`, y CIIU4 para los años 2018 y 2021 en la variable *numérica* `ciiu4_m04`.\n\n-   `ciiu3_m04`: CIIU (III version) del entrevistado, para el año 2016\n-   `ciiu4_m04`: CIIU (IV version) del entrevistado, para el año 2018 y 2021\n\nPor lo tanto, se realiza una recodificación generando una nueva variable *numérica* donde están todas las olas homolagadas a la CIIU4, llamada `isic4`.\n\n```{r,echo=FALSE,message=FALSE}\n# Recodificar variable CIIU 3 para que queden de 4 dígitos\ndata$ciiu3 <- sprintf(\"%04d\",data$ciiu3_m04)\n\n# Recodificar variable CIIU 4 para que queden de 4 dígitos\ndata$ciiu4 <- sprintf(\"%04d\",data$ciiu4_m04)\n\n# Creación de variable CIIU 4 con CIIU 3\n## Carga bbdd con comparacion 31 y 4\nisic4_isic31 <- read_csv(here::here(\"input/ISIC4_ISIC31.txt\"))\n\n## Recodificación CIIU 3 -> CIIU 4\nindices <- match(data$ciiu3,isic4_isic31$ISIC31code)\ndata$ciiu4_rec <- isic4_isic31$ISIC4code[indices]\n\n# Creación variable isic4 con ciiu4 y ciiu4_rec (ex ciiu3) 4 digitos\ndata$isic4 <- ifelse(!is.na(data$ciiu4_rec),data$ciiu4_rec,data$ciiu4) # es la unión en una variable de todo en ciiu4\n```\n\nSin embargo, esta variable también se presente solamente en las olas 2016, 2018 y 2021. Por lo que, se duplican los datos de rama de la actividad económica para los años siguientes, es decir, en 2017 se pondrán los valores de 2016, y así sucesivamente.\n\n```{r,echo=FALSE,message=FALSE,warning=FALSE}\n# Crear una columna con la variable \"isic4\" adelantada una ola\ndata$isic4 <- as.numeric(data$isic4)\n\ndata <- data %>%\n  arrange(ola) %>%  # Ordena por ola, por si acaso no está ordenado\n  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo\n  mutate(isic4_lagged=lag(isic4,n=1)) %>%  # Desplaza \"isic4\" a la siguiente ola\n  ungroup() \n\n# Rellenar los valores NA en la variable original\ndata <- data %>%\n  mutate(isic4=ifelse(!is.na(isic4),isic4,isic4_lagged)) %>%  # Si isic4 es NA, sustituir con el valor de la ola anterior\n  select(-isic4_lagged)                 # Elimina la columna temporal\n```\n\nAdemás, se crea la variable *numérica* `isic4_2d` con 2 dígitos, y la variable *factor* `rama` con la agrupación del CIIU4 de dos dígitos en ramas de la actividad económica. \n\n```{r,echo=FALSE}\n# CIIU 4: creación de variable con 2 dígitos\ndata$isic4 <- sprintf(\"%04d\",data$isic4)\ndata$isic4_2d <- as.character(data$isic4)\ndata$isic4_2d <- substr(data$isic4,1,2)\ndata$isic4_2d <- as.numeric(data$isic4_2d)\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$isic4_2d,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Rama de Actividad Económica\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Rama de Actividad Económica, por ola\")\n\n\n\n# Creación de variable con letra\ndata <- mutate(data,\n               rama=factor(case_when(isic4_2d<=03~\"A\",\n                              isic4_2d>=05&isic4_2d<=09~\"B\",\n                              isic4_2d>=10&isic4_2d<=33~\"C\",\n                              isic4_2d==35~\"D\",\n                              isic4_2d>=36&isic4_2d<=39~\"E\",\n                              isic4_2d>=41&isic4_2d<=43~\"F\",\n                              isic4_2d>=45&isic4_2d<=47~\"G\",\n                              isic4_2d>=49&isic4_2d<=53~\"H\",\n                              isic4_2d>=55&isic4_2d<=56~\"I\",\n                              isic4_2d>=58&isic4_2d<=63~\"J\",\n                              isic4_2d>=64&isic4_2d<=66~\"K\",\n                              isic4_2d==68~\"L\",\n                              isic4_2d>=69&isic4_2d<=75~\"M\",\n                              isic4_2d>=77&isic4_2d<=82~\"N\",\n                              isic4_2d==84~\"O\",\n                              isic4_2d==85~\"P\",\n                              isic4_2d>=86&isic4_2d<=88~\"Q\",\n                              isic4_2d>=90&isic4_2d<=93~\"R\",\n                              isic4_2d>=94&isic4_2d<=96~\"S\",\n                              isic4_2d>=97&isic4_2d<=98~\"T\",\n                              isic4_2d==99~\"U\"))) \n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$rama,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Rama de Actividad Económica\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Rama de Actividad Económica, por ola\")\n```\n\n\n### rama2\n\nSe crea una segunda variable *tipo factor* de Rama de la Actividad Económica, llamada `rama_2`, donde:\n\n-   Se unen *B* y *C*\n-   Se unen *D*, *E* y *F*\n-   Se unen *G* y *I*\n-   Se unen *J*, *K*, *L*, *M* y *N*\n-   Se unen *P* y *Q*\n-   Se unen *R*, *S* y *U*\n\n```{r,echo=FALSE}\n# Creación de variable rama 2\ndata <- mutate(data,\n               rama_2=factor(case_when(rama==\"A\"~\"A\",\n                                rama==\"B\"|rama==\"C\"~\"BC\",\n                                rama==\"D\"|rama==\"E\"|rama==\"F\"~\"DEF\",\n                                rama==\"G\"|rama==\"I\"~\"GI\",\n                                rama==\"H\"~\"H\",\n                                rama==\"J\"|rama==\"K\"|rama==\"L\"|rama==\"M\"|rama==\"N\"~\"JKLMN\",\n                                rama==\"O\"~\"O\",\n                                rama==\"P\"|rama==\"Q\"~\"PQ\",\n                                rama==\"R\"|rama==\"S\"|rama==\"U\"~\"RSU\",\n                                rama==\"T\"~\"T\")))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$rama_2,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Rama 2\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Rama 2, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion,isic4,isic4_2d,rama,rama_2        # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 10.858 obs.\n```\n\n\n### supervisa\n\nLa variable *numérica* ELSOC:\n\n-   `m06`. En su trabajo, ¿a cuántas personas supervisa usted?\n\nSe recodifica en una nueva variable *dicotómica numérica*, `supervisa`, donde:\n\n-   `supervisa==0`: No supervisa (`m06==0`)\n-   `supervisa==1`: Supervisa a una o más personas (`m06>=1`)\n\n```{r,echo=FALSE}\n# Crear variable supervisa==1, no supervisa==0\ndata <- data %>%\n  mutate(supervisa=case_when(m06==0~0,\n                             m06>=1~1))\n```\n\nPero, dado que la variable `m06` solamente se encuentra en las olas 2016, 2018 y 2021, se duplican los datos para los años siguientes, es decir, en 2017 se pondrán los valores de 2016, y así sucesivamente.\n\n```{r,echo=FALSE}\n# Crear una columna con la variable \"m06\" adelantada una ola\ndata <- data %>%\n  arrange(ola) %>%  # Ordena por ola, por si acaso no está ordenado\n  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo\n  mutate(m06_lagged=lag(m06,n=1)) %>%  # Desplaza \"m06\" a la siguiente ola\n  ungroup() \n\n# Rellenar los valores NA en la variable original\ndata <- data %>%\n  mutate(m06_full=ifelse(!is.na(m06),m06,m06_lagged)) %>%  # Si m06 es NA, sustituir con el valor de la ola anterior\n  select(-m06_lagged) \n```\n\n```{r,echo=FALSE}\n# Crear variable supervisa==1, no supervisa==0\ndata <- data %>%\n  mutate(supervisa=case_when(m06_full==0~0,\n                             m06_full>=1~1))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$supervisa,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Supervisa\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de variable Supervisa, por ola\")\n\n\n# # Tabla de frecuencias y porcentajes \n# sjt.xtab(elsoc_long_2016_2023$m06,elsoc_long_2016_2023$ola,\n#          show.col.prc=TRUE, \n#          var.labels=c(\"Supervisa\",\"Ola\"),\n#          show.summary=FALSE,\n#          title=\"Frecuencias y porcentajes de variable Supervisa, por ola\")\n# \n# resumen_na <- elsoc_long_2016_2023 %>%\n#   group_by(ola) %>%                   # Agrupa por la columna \"ola\"\n#   summarise(total_na = sum(is.na(m06)))\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion,isic4,isic4_2d,rama,rama_2,       # caract empleo\n         supervisa                                       # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 10.130 obs.\n```\n\n\n### class1\n\nSe crea la variable tipo factor posición de clase `class1` con 6 categorías:\n\n1. Empleadores y autoempleados profesionales: pequeña burguesia\n2. Autoempleados superior incompleta o menos: informales\n3. Expert managers\n4. Experts\n5. Supervisors\n6. Workers\n\n```{r,echo=FALSE}\n# Creación de variable posición de clase\ndata <- mutate(data,\n               class1=case_when(\n                 rel_empleo2==\"Empleador\"~\"Petit bourgeoisie\",\n                 rel_empleo2==\"Autoempleado\"&educ>=9~\"Petit bourgeoisie\",\n                 rel_empleo2==\"Autoempleado\"&educ<9~\"Informal\",\n                 rel_empleo2==\"Asalariado\"&cualificacion==\"Experts\"&supervisa==1~\"Expert managers\",\n                 rel_empleo2==\"Asalariado\"&cualificacion==\"Experts\"&supervisa==0~\"Experts\",\n                 rel_empleo2==\"Asalariado\"&cualificacion==\"Skilled\"&supervisa==1~\"Supervisors\",\n                 rel_empleo2==\"Asalariado\"&cualificacion==\"Unskilled\"&supervisa==1~\"Supervisors\",\n                 rel_empleo2==\"Asalariado\"&cualificacion==\"Skilled\"&supervisa==0~\"Workers\",\n                 rel_empleo2==\"Asalariado\"&cualificacion==\"Unskilled\"&supervisa==0~\"Workers\"))\n\ndata$class1 <- factor(data$class1,\n                      levels=c(\"Petit bourgeoisie\",\n                               \"Informal\",\n                               \"Expert managers\",\n                               \"Experts\",\n                               \"Supervisors\",\n                               \"Workers\"))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class1, data$ola,\n         show.col.prc = TRUE, \n         var.labels = c(\"Posición de clase 1\",\"Ola\"),\n         show.summary = FALSE,\n         title = \"Frecuencias y porcentajes de la Posición de clase 1, por ola\")\n```\n\n\n### class1a \n\nSe crea la variable tipo factor posición de clase `class1a` con 6 categorías ordenadas, dejando a `Expert managers` como categoría de referencia.\n\n```{r,echo=FALSE}\ndata$class1a <- factor(data$class1,\n                       levels=c(\"Expert managers\",\n                                \"Petit bourgeoisie\",\n                                \"Informal\",\n                                \"Experts\",\n                                \"Supervisors\",\n                                \"Workers\"))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class1a,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 1 a\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 1 a, por ola\")\n```\n\n\n### class2\n\nSe crea la variable tipo factor posición de clase `class2` con 7 categorías:\n\n1. Empleadores y autoempleados profesionales: pequeña burguesia\n2. Autoempleados superior incompleta o menos: informales\n3. Eexpert managers\n4. Experts\n5. Supervisors\n6. Workers\n7. Desocupados/Retirados\n\n```{r,echo=FALSE}\n# Creación de variable posición de clase\ndata <- mutate(data,\n               class2=case_when(rel_empleo==\"Patrón/a o empleador/a\"|rel_empleo==\"Trabaja solo, no tiene empleados\"&educ>=9~\"Petit bourgeoisie\",\n                                rel_empleo==\"Trabaja solo, no tiene empleados\"&educ<9~\"Informal\",\n                                cualificacion==\"Experts\"&supervisa==1~\"Expert managers\",\n                                cualificacion==\"Experts\"&supervisa==0~\"Experts\",\n                                cualificacion==\"Skilled\"|cualificacion==\"Unskilled\"&supervisa==1~\"Supervisors\",\n                                cualificacion==\"Skilled\"|cualificacion==\"Unskilled\"&supervisa==0~\"Workers\",\n                                actividad==\"Jubilado o pensionado\"|actividad==\"Desempleado, buscando trabajo\"~\"Desocupados/Retirados\"))\n\ndata$class2 <- factor(data$class2,\n                      levels=c(\"Petit bourgeoisie\",\n                               \"Informal\",\n                               \"Expert managers\",\n                               \"Experts\",\n                               \"Supervisors\",\n                               \"Workers\",\n                               \"Desocupados/Retirados\"))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class2,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 2\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 2, por ola\")\n```\n\n\n### class2a \n\nSe crea la variable tipo factor posición de clase `class2a` con 7 categorías ordenadas, dejando a `Expert managers` como categoría de referencia.\n\n```{r,echo=FALSE}\ndata$class2a <- factor(data$class2,\n                       levels=c(\"Expert managers\",\n                                \"Petit bourgeoisie\",\n                                \"Informal\",\n                                \"Experts\",\n                                \"Supervisors\",\n                                \"Workers\",\n                                \"Desocupados/Retirados\"))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class2a,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 2 a\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 2 a, por ola\")\n```\n\n\n### class3\n\nSe crea la variable tipo factor posición de clase `class3` con 6 categorías, fijando la clase para la ola 3.\n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1\" en la ola 3\nclass1_ola3 <- data %>%\n  filter(ola==3) %>%\n  select(idencuesta,class1) %>%  \n  rename(class3=class1) # Renombrar \"class1\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class1_ola3,by=\"idencuesta\") \n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class3,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 3\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 3, por ola\")\n```\n\n\n### class3a \n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1a\" en la ola 3\nclass1a_ola3 <- data %>%\n  filter(ola==3) %>%\n  select(idencuesta,class1a) %>%  \n  rename(class3a=class1a) # Renombrar \"class2\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class1a_ola3,by=\"idencuesta\")\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class3a,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 3 a\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 3 a, por ola\")\n```\n\n\n### class4\n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1\" en la ola 3\nclass2_ola3 <- data %>%\n  filter(ola==3) %>%\n  select(idencuesta,class2) %>%  \n  rename(class4=class2) # Renombrar \"class2\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class2_ola3,by=\"idencuesta\") \n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class4,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 4\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 4, por ola\")\n```\n\n\n### class4a \n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1\" en la ola 3\nclass2a_ola3 <- data %>%\n  filter(ola==3) %>%\n  select(idencuesta,class2a) %>%  \n  rename(class4a=class2a) # Renombrar \"class2\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class2a_ola3,by=\"idencuesta\") \n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class4a,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 4 a\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 4 a, por ola\")\n```\n\n### class5\n\nSe crea la variable tipo factor posición de clase `class3` con 6 categorías, fijando la clase para la ola 3.\n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1\" en la ola 3\nclass1_ola1 <- data %>%\n  filter(ola==1) %>%\n  select(idencuesta,class1) %>%  \n  rename(class5=class1) # Renombrar \"class1\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class1_ola1,by=\"idencuesta\") \n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class5,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 5\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 5, por ola\")\n```\n\n\n### class5a \n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1a\" en la ola 3\nclass1a_ola1 <- data %>%\n  filter(ola==1) %>%\n  select(idencuesta,class1a) %>%  \n  rename(class5a=class1a) # Renombrar \"class2\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class1a_ola1,by=\"idencuesta\")\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class5a,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 5 a\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 5 a, por ola\")\n```\n\n\n### class6\n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1\" en la ola 3\nclass2_ola1 <- data %>%\n  filter(ola==1) %>%\n  select(idencuesta,class2) %>%  \n  rename(class6=class2) # Renombrar \"class2\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class2_ola1,by=\"idencuesta\") \n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class6,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 6\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 6, por ola\")\n```\n\n\n### class6a \n\n```{r,echo=FALSE}\n# Identificar los valores de \"class1\" en la ola 3\nclass2a_ola1 <- data %>%\n  filter(ola==1) %>%\n  select(idencuesta,class2a) %>%  \n  rename(class6a=class2a) # Renombrar \"class2\" a \"class3\"\n\n# Unir esta información con la base de datos original\ndata <- data %>%\n  left_join(class2a_ola1,by=\"idencuesta\") \n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class6a,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Posición de clase 6 a\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de la Posición de clase 6 a, por ola\")\n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion,isic4,isic4_2d,rama,rama_2,       # caract empleo\n#         supervisa,                                      # caract empleo\n#         class1,class1a,class2,class2a,class3,\n         class3a   # caract empleo\n#         class4,class4a,class5,class5a,class6,class6a    # caract empleo\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 9.072 obs.\n```\n\n\n### Alluvial\n\n```{r,echo=FALSE}\nelsoc_diseno <- svydesign(ids = ~segmento_disenno, #muestreo por conglomerado a nivel de manzanas (segmento)\n                          strata = ~estrato_disenno, #muestreo estratificado a nivel ciudad (estato)\n                          weights = ~ponderador_long_total, #ponderador longitudinal\n                          nest = TRUE,\n                          data = data)\n\n#Paso 1\ndatos.clase <- data.frame((svytable(~class1 + ola + idencuesta, elsoc_diseno, round = F))) %>% dplyr::filter(Freq>0)  %>% group_by(ola) %>% mutate(porcentaje=Freq/sum(Freq)) %>% na.omit()\n\n#Paso 2\netiquetas.clase <- data.frame((svytable(~class1 + ola, elsoc_diseno, round = F))) %>% group_by(ola) %>% mutate(porcentaje=Freq/sum(Freq)) %>% na.omit() %>% \n  mutate(idencuesta = 1)\ndatos.clase$class1 <- factor(datos.clase$class1, levels = rev(levels(datos.clase$class1)))\netiquetas.clase$class1 <- factor(etiquetas.clase$class1, levels = rev(levels(etiquetas.clase$class1)))\n```\n\n```{r alluvial,echo=FALSE}\ncolors<- c(\"#f1eef6ff\",\"#bdc9e1ff\",\"#b3b3b3ff\",\"#74a9cfff\",\"#0570b0ff\")\nalluvial_clase <- ggplot(datos.clase, aes(x = ola, fill = class1, stratum = class1,\n                             alluvium = idencuesta, y = porcentaje))+\n    ggalluvial::geom_flow(alpha = .66) + \n    ggalluvial::geom_stratum(linetype = 0) +\n    scale_y_continuous(labels = scales::percent) + \n    ylab(label = NULL) +\n    xlab(label = NULL) + \n    theme(#legend.position = 'top',\n          legend.title = element_blank(),\n          plot.caption = element_text(hjust = 1)) +\n#    scale_fill_manual(values = colors) +\n    geom_shadowtext(data = etiquetas.clase, \n              aes(label = ifelse(porcentaje > 0 , scales::percent(porcentaje, accuracy = .1),\"\")),\n              position = position_stack(vjust = .5),\n              show.legend = FALSE,\n              size = 4,\n              color = rep('white'),\n              bg.colour='grey30')+\n  scale_x_discrete(labels = c(2016, 2017, 2018, 2019, 2021, 2022, 2023))\n\nalluvial_clase\n\nggsave(alluvial_clase, file=\"output/graphs/alluvial_clase.png\", height = 8, width = 7)\n```\n\n### Participación en sindicatos\n\nCon la variable *numérica* ELSOC:\n\n-   `c12_04`. Membresía sindicatos\n\nSe crea la variable `mem_sindicato`. Pero, dado que la variable `c12_04` solamente se encuentra en las olas 2016, 2018 y 2021, se duplican los datos para los años siguientes, es decir, en 2017 se pondrán los valores de 2016, y así sucesivamente.\n\n```{r,echo=FALSE}\n# Crear una columna con la variable \"c12_04\" adelantada una ola\ndata <- data %>%\n  arrange(ola) %>%  # Ordena por ola, por si acaso no está ordenado\n  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo\n  mutate(c12_04_lagged=lag(c12_04,n=1)) %>%  # Desplaza c12_04 a la siguiente ola\n  ungroup() \n\n# Rellenar los valores NA en la variable original\ndata <- data %>%\n  mutate(c12_04_full=ifelse(!is.na(c12_04),c12_04,c12_04_lagged)) %>%  # Si c12_04 es NA, sustituir con el valor de la ola anterior\n  select(-c12_04_lagged) \n```\n\n```{r,echo=FALSE}\n# Recodficar\ndata <- data %>%\n  mutate(mem_sindicato=car::recode(c12_04_full,\n                                   recodes=c(\"1='No es miembro';\n                                              2='Miembro inactivo';\n                                              3='Miembro activo'\"),\n                                   as.factor=TRUE, # convertir a factor\n                                   levels=c(\"No es miembro\",\n                                            \"Miembro inactivo\",\n                                            \"Miembro activo\"))) # ordenar niveles\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$mem_sindicato,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Membresía sindical\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Trabajadores/as miembros/as de sindicatos, por ola\") \n```\n\n\n### unionized\n\nSe crea una nueva variable *dicotómica*, llamada `unionized`, para identificar a aquellas personas que:\n\n-   `unionized==1`: Sean mienmbros activos (`c12_04==3`) o inactivos (`c12_04==2`) de sindicatos\n-   `unionized==0`: No sean miembros de sindicatos (`c12_04==1`)\n\n```{r,echo=FALSE}\n# Crear variable binaria: unionized\ndata <- mutate(data,\n               unionized=if_else(c12_04_full==2|c12_04_full==3,1,0))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$unionized,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Unionized\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Trabajadores/as Sindicalizados/as, por ola\") \n```\n\n```{r,echo=FALSE}\n# Ir armando data final\ndata2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion,isic4,isic4_2d,rama,rama_2,       # caract empleo\n#         supervisa,                                      # caract empleo\n#         class1,class1a,class2,class2a,class3,\n         class3a   # caract empleo\n#         class4,class4a,class5,class5a,class6,class6a    # caract empleo\n#         unionized\n) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\ndata2 <- na.omit(data2)\n\n# 9.072 obs.\n```\n\n\n## Política\n\n### Autoposicionamiento\n\nObservamos la variable *numérica* ELSOC:\n\n-   `c15`. Cambiando de tema, tradicionalmente en nuestro país la gente define las posiciones políticas como más cercanas a la izquierda, al centro o a la derecha. Usando una escala de 0 a 10, donde 0 es ser de \"izquierda\", 5 es ser de \"centro\" y 10 es ser de \"derecha\", ¿Dónde se ubicaría usted en esta escala?\n\n```{r,echo=FALSE}\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$c15,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Autoposicionamiento\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Actividad principal, por ola\") \n```\n\n\n### pol_id\n\nCon la variable *numérica* ELSOC:\n\n-   `c15`. Cambiando de tema, tradicionalmente en nuestro país la gente define las posiciones políticas como más cercanas a la izquierda, al centro o a la derecha. Usando una escala de 0 a 10, donde 0 es ser de \"izquierda\", 5 es ser de \"centro\" y 10 es ser de \"derecha\", ¿Dónde se ubicaría usted en esta escala?\n\nSe crea la variable *factor* `pol_id`.\n\n```{r,echo=FALSE}\n# Recodficar\ndata <- data[!is.na(data$c15), ]\ndata$pol_id <- car::recode(data$c15,\n                           recodes=c(\"c(11,12,-888,-999)='No se identifica';\n                                      c(0,1,2,3,4)='Izquierda';\n                                      c(5)='Centro';\n                                      c(6,7,8,9,10)='Derecha'\"),\n                           as.factor=TRUE, \n                           levels=c('Izquierda', \n                                    'Centro',\n                                    'Derecha',\n                                    'No se identifica'))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$pol_id,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Identificación política\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Identificación Política, por ola\") \n```\n\n\n### pol_interes\n\nObservamos la variable *numérica* ELSOC:\n\n-   `c13`. ¿Qué tan interesado está usted en la política?\n\nSe crea la variable `pol_interes`.\n\n```{r,echo=FALSE}\n# Recodficar\ndata <- data[!is.na(data$c13), ]\ndata <- data %>%\n  mutate(pol_interes=c13)\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$pol_interes,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Interés en la política\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Trabajadores/as interesados en la política, por ola\") \n```\n\n\n### pol_habla\n\nObservamos la variable *numérica* ELSOC:\n\n-   `c14_01`. ¿Con qué frecuencia realiza usted las siguientes actividades? Habla de política con familiares o amigos\n\nSe crea la variable `pol_habla`.\n\n```{r,echo=FALSE}\n# Recodficar\ndata <- data[!is.na(data$c14_01), ]\ndata <- data %>%\n  mutate(pol_habla=c14_01)\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$pol_habla,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Habla de política\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Habla de política, por ola\") \n```\n\n\n### pol_inform\n\nObservamos la variable *numérica* ELSOC:\n\n-   `c14_02`. ¿Con qué frecuencia realiza usted las siguientes actividades? Se informa activamente sobre política en medios tales como televisión, radios, diarios o internet\n\nSe crea la variable `pol_inform`.\n\n```{r,echo=FALSE}\n# Recodficar\ndata <- data[!is.na(data$c14_02), ]\ndata <- data %>%\n  mutate(pol_inform=c14_02)\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$pol_inform,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Se informa de política\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Se informa de política, por ola\") \n```\n\n\n## Brechas salariales\n\nEliminamos los casos que responden '0' en salario.\n{revisar si se deberían eliminar también los que responden 1}\n\n```{r}\nsummary(data$perc_gerente)\ndata <- data %>% filter(perc_gerente>100000)\ndata <- data %>% filter(perc_gerente<1200000000)\nhist(data$perc_gerente)\nsummary(data$perc_obrero)\ndata <- data %>% filter(perc_obrero>10000)\ndata <- data %>% filter(perc_obrero<10000000)\nhist(data$perc_obrero)\nsummary(data$just_gerente)\ndata <- data %>% filter(just_gerente>100000)\ndata <- data %>% filter(just_gerente<1200000000)\nhist(data$just_gerente)\ndata <- data %>% filter(just_obrero>10000)\ndata <- data %>% filter(just_obrero<10000000)\nhist(data$just_obrero)\n```\n\n\n```{r}\ndata$brecha_perc <- log(data$perc_gerente/data$perc_obrero)\ndata$brecha_just <- log(data$just_gerente/data$just_obrero)\ndata$brecha_gerente <- log(data$perc_gerente/data$just_gerente)\ndata$brecha_obrero <- log(data$perc_obrero/data$just_obrero)\n```\n\n```{r}\nsummary(data$brecha_perc)\n```\n\n* Brecha > 0: El salario percibido gerente es mayor que el salario percibido obrero.\n* Brecha = 0: El salario percibido gerente es igual al salario percibido obrero (equidad).\n* Brecha < 0: El salario percibido gerente es menor que el salario percibido obrero.\n\n```{r}\nsummary(data$brecha_just)\n```\n\n* Brecha > 0: El salario de un gerente debería ser mayor que el salario obrero.\n* Brecha = 0: El salario de un gerente debería ser igual al salario obrero (equidad).\n* Brecha < 0: El salario de un gerente debería ser menor que el salario obrero.\n\n```{r}\nsummary(data$brecha_gerente)\n```\n\n* Brecha > 0: El salario percibido de un gerente es mayor que el salario que debería tener (sobrepago).\n* Brecha = 0: El salario percibido de un gerente es igual al salario que debería tener (equidad).\n* Brecha < 0: El salario percibido de un gerente es menor que el salario que debería tener (infra-pago).\n\n```{r}\nsummary(data$brecha_obrero)\n```\n\n* Brecha > 0: El salario percibido de un obrero es mayor que el salario que debería tener (sobrepago).\n* Brecha = 0: El salario percibido de un obrero es igual al salario que debería tener (equidad).\n* Brecha < 0: El salario percibido de un obrero es menor que el salario que debería tener (infra-pago).\n\n\n## Sociodemográficos\n\n### metrop\n\nCon la variable *numérica* ELSOC:\n\n-   `region_cod`. Region (Codigo)\n\nSe crea la variable *dicotómica* `metrop`, donde:\n\n-   `metrop==0`: No pertenece a la Región Metropolitana\n-   `metrop==1`: Pertenece a la Región Metropolitana (`region_cod==13`)\n\n```{r,echo=FALSE}\n# Crear variable sector\ndata <- data %>%\n  mutate(metrop=if_else(region_cod==13,1,0))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$metrop,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Región Metropolitana\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de variable Región Metropolitana, por ola\")\n```\n\n\n### educ\n\nCon la variable *numérica* ELSOC:\n\n-   `m01`. ¿Cuál es su nivel educacional? Indique el tipo de estudio actual (si estudia actualmente) o el último tipo aprobado (si no estudia actualmente).\n\nSe crea la variable *factor* `educ`, donde:\n\n-   `educ==Básica`: Educación básica completa o menos (`m02==1`,`m02==2`,`m02==3`)\n-   `educ==Media`: Educación media incompleta o completa (`m02==4`,`m02==5`)\n-   `educ==Técnica`: Educación técnica incompleta o completa (`m02==6`,`m02==7`)\n-   `educ==Superior`: Educación superior incompleta o completa, y postgrado (`m02==8`,`m02==9`,`m02==10`)\n\n```{r,echo=FALSE}\ndata <- data[!is.na(data$educ), ]\ndata$educ <- car::recode(data$educ,\n                         recodes=c(\"c(1,2,3)='Básica';\n                                    c(4,5)='Media';\n                                    c(6,7)='Técnica';\n                                    c(8,9,10)='Superior'\"),\n                         as.factor=TRUE, \n                         levels=c('Básica',\n                                  'Media',\n                                  'Técnica',\n                                  'Superior'))\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$educ,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Educación\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de variable Educación, por ola\")\n```\n\n\n### Identidad de clase\n\nCon la variable *numérica* ELSOC:\n\n-   `c33`. En la sociedad, comúnmente, existen distintos grupos o clases sociales. Las personas de clase social alta son las que tienen los ingresos más altos, el mayor nivel de educación y los trabajos más valorados. Las personas de clase social baja son las que tienen los ingresos más bajos, el menor nivel de educación y los trabajos menos valorados. Entre estas clases existen otras intermedias. Según su opinión, a cuál de los siguientes grupos o clases sociales pertenece usted:\n\nSe crea la variable *factor* `class_id`, donde:\n\n-   `class_id==Baja`: Clase baja y media baja (`c33==1`,`c33==2`)\n-   `class_id==Media`: Clase media  (`c33==3`)\n-   `class_id==Alta`: Clase media alta y alta (`c33==4`,`c33==5`)\n\n```{r,echo=FALSE}\n# data <- data[!is.na(data$c33), ]\ndata$class_id <- car::recode(data$c33,\n                         recodes=c(\"c(1,2)='Baja';\n                                    c(3)='Media';\n                                    c(4,5)='Alta'\"),\n                         as.factor=TRUE, \n                         levels=c('Baja',\n                                  'Media',\n                                  'Alta'))\n```\n\nYa que esta variable no se preguntó en la ola 2 (2018), se duplican los valores de la ola 1. Tener en consideración que desde la ola 4 en adelante, solamente se pregunta para la muestra de refresco.\n\n```{r,echo=FALSE}\n# Crear una columna con la variable class_id adelantada una ola\ndata <- data %>%\n  group_by(idencuesta) %>%  # Agrupa por id para trabajar en cada individuo\n  mutate(class_id_lagged=if_else(ola==2,lag(as.character(class_id),n=1),NA_character_)) %>%  # Desplaza class_id solo para la ola 2\n  ungroup() %>%\n# Rellenar los valores NA (de las olas que no estaban) en la variable original\n  mutate(class_id=ifelse(!is.na(class_id),as.character(class_id),class_id_lagged)) %>%  # Sustituye valores de class_id si es NA solo con la variable desplazada\n  mutate(class_id=factor(class_id)) %>%  # Convierte de nuevo a factor\n  select(-class_id_lagged)  # Elimina la columna temporal\n```\n\n```{r,echo=FALSE}\n# Volver a establecer niveles\ndata$class_id <- factor(data$class_id,\n                        levels=c(\"Baja\",\n                                 \"Media\",\n                                 \"Alta\"))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$class_id,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Identidad de Clase\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de variable Identidad de Clase, por ola\")\n```\n\n\n\n### Estatus social subjetivo\n\nCon la variable *numérica* ELSOC:\n\n-   `d01_01`. En nuestra sociedad, hay grupos que tienden a ubicarse en los niveles más altos y grupos que tienden a ubicarse en los niveles más bajos de la sociedad. Usando la escala presentada, donde 0 es el nivel más bajo y 10 el nivel más alto,  ¿Dónde se ubicaría usted en la sociedad chilena?\n\nSe crea la variable *numérica* `class_estatus`, donde:\n\n```{r,echo=FALSE}\ndata <- data[!is.na(data$d01_01), ]\ndata <- data %>%\n  mutate(class_estatus=d01_01)\n\n# Tabla de frecuencias y porcentajes \nsjt.xtab(data$class_estatus,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Estatus social subjetivo\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de variable Estatus social subjetivo, por ola\")\n```\n\n\n### Ingreso\n\n```{r,echo=FALSE}\n#Impute midpoint of income ranges\ndata$m14_rec <- as.numeric(car::recode(data$m14,\n                                       \"1=20000;\n                                       2=62500;\n                                       3=105000;\n                                       4=147500;\n                                       5=190000;\n                                       6=220000;\n                                       7=255000;\n                                       8=300000;\n                                       9=340000;\n                                       10=380000;\n                                       11=432500;\n                                       12=502500;\n                                       13=602500;\n                                       14=757500;\n                                       15=1075000;\n                                       16=1300000\"))\n\n#Impute midpoint of income ranges (2021)\ndata$m14b_rec <- as.numeric(car::recode(data$m14b,\n                                        \"1=125000;\n                                        2=300000;\n                                        3=400000;\n                                        4=575000;\n                                        5=700000;\n                                        c(9,10,11,12,16)=NA\"))\n\n#Recode DK/DA of Income to NA\ndata$m13_rec <- as.numeric(car::recode(data$m13,\"c(-888,-999)=NA\"))\n\n#replace NA of income with new imputed variable\ndata$m13_imp <- ifelse(!is.na(data$m13_rec),data$m13_rec,data$m14_rec)\nsummary(data$m13_imp)\n\ndata$m13_imp <- ifelse(is.na(data$m13_imp),data$m14b_rec,data$m13_imp)\nsummary(data$m13_imp)\n\ndata$ingreso <- data$m13_imp\n```\n\n\n### Log del ingreso\n\n```{r,echo=FALSE}\ndata$ingreso_log <- log(data$ingreso)\n```\n\n\n### Edad al cuadrado\n\nCon la variable *numérica* ELSOC:\n\n- `m0_edad`: Edad del entrevistado\n\nSe crea la variable *numérica* `edad2` con la edad al cuadrado.\n\n```{r,echo=FALSE}\ndata$edad2 <- (data$edad)**2\n```\n\n\n### female\n\nSe crea una nueva variable dicotómica, llamada `female`, para identificar a aquellas personas que:\n\n-   `female==0`: En la variable sexo no se identifican como mujeres\n-   `female==1`: En la variable sexo se identifican como mujeres\n\n```{r,echo=FALSE}\n# Crear variable binaria: female\ndata <- mutate(data,\n               female=if_else(sexo==2,1,0))\n\n# Tabla de frecuencias y porcentajes\nsjt.xtab(data$female,data$ola,\n         show.col.prc=TRUE, \n         var.labels=c(\"Female\",\"Ola\"),\n         show.summary=FALSE,\n         title=\"Frecuencias y porcentajes de Mujeres, por ola\") \n```\n\n\n\n## Guardar datos\n\nLas bases generadas serán:\n\n- Principal: Con todos los datos\n  - `elsoc-minicoes.Rdata`\n  - `elsoc-minicoes.rds`\n  \n```{r,echo=FALSE}\n# Ir armando data final\nelsoc_minicoes <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         sexo,female,edad,edad2,educ,metrop,             # caract sociodem\n         ingreso,ingreso_log,                            # caract sociodem\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion,isic4,isic4_2d,rama,rama_2,       # caract empleo\n         supervisa,                                      # caract empleo\n         class1,class1a,class2,class2a,                  # clase y estatus\n         class3,class3a,class4,class4a,                  # clase y estatus\n         class5,class5a,class6,class6a,                  # clase y estatus\n         class_id, class_estatus,\n         mem_sindicato,unionized,                        # membresia sindicato\n         marcha,                                         # freq participa marchas\n         huelga,                                         # freq participa huelgas\n         c15,pol_id,pol_interes,pol_habla,pol_inform,    # interes politica\n         perc_gerente,                                   # Salario percibido gerente\n         perc_obrero,                                    # Salario percibido obrero\n         just_gerente,                                   # Salario justo gerente\n         just_obrero,                                    # Salario justo obrero\n         brecha_perc,brecha_just,brecha_gerente,brecha_obrero\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\nsave(elsoc_minicoes,file=(here::here(\"output/elsoc-minicoes.Rdata\")))\nsaveRDS(elsoc_minicoes,file=(here::here(\"output/elsoc-minicoes.rds\")))\n\n# data2 <- na.omit(data2)\n\n# 18.645 obs.\n```  \n  \n```{r}\ncolSums(is.na(elsoc_minicoes))\n```\n\n\n```{r,echo=FALSE}\n# Ir armando data final\nelsoc_minicoes2 <- data %>%\n  select(idencuesta,                                     # identificacion enctdo\n         ola,                                            # identificacion ola\n         version,muestra,tipo_atricion,estrato,          # identificacion srvy\n         segmento_disenno,ponderador02,estrato_disenno,  # identificacion srvy\n         sexo,female,edad,edad2,educ,metrop,             # caract sociodem\n         ingreso,ingreso_log,                            # caract sociodem\n         actividad,actividad2,rel_empleo,rel_empleo2,    # caract empleo\n         sector,isco08,isco08_1d,isco08_2d,              # caract empleo\n         cualificacion,isic4,isic4_2d,rama,rama_2,       # caract empleo\n         supervisa,                                      # caract empleo\n         class1,class1a,class2,class2a,                  # clase y estatus\n         class3,class3a,class4,class4a,                  # clase y estatus\n         class5,class5a,class6,class6a,                  # clase y estatus\n         mem_sindicato,unionized,                        # membresia sindicato\n         marcha,                                         # freq participa marchas\n         huelga,                                         # freq participa huelgas\n         c15,pol_id,pol_interes,pol_habla,pol_inform,    # interes politica\n         perc_gerente,                                   # Salario percibido gerente\n         perc_obrero,                                    # Salario percibido obrero\n         just_gerente,                                   # Salario justo gerente\n         just_obrero,                                    # Salario justo obrero\n         brecha_perc,brecha_just,brecha_gerente,brecha_obrero\n         ) %>% \n  sjlabelled::set_na(.,na=c(-999,-888,-777,-666))\n\nelsoc_minicoes2 <- elsoc_minicoes2 %>%\n  filter(actividad=='Trabaja de manera remunerada con jornada completa'|\n         actividad=='Trabaja de manera remunerada a tiempo parcial'|\n         actividad=='Estudia y trabaja')\n\n# elsoc_minicoes2 <- na.omit(elsoc_minicoes2)\n\nsave(elsoc_minicoes2,file=(here::here(\"output/elsoc-minicoes2.Rdata\")))\nsaveRDS(elsoc_minicoes2,file=(here::here(\"output/elsoc-minicoes2.rds\")))\n\n# 11.632 obs.\n```  \n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"01-exploracion.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["references.bib"],"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"01-exploracion.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}